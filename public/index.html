<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>TARBOO API Hub</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
    <link rel="stylesheet" href="style.css" />
    <script src="https://unpkg.com/gsap@3.12.2/dist/gsap.min.js"></script>
    <script src="https://unpkg.com/gsap@3.12.2/dist/ScrollTrigger.min.js"></script>
    <style>
        body {
            font-family: 'Tajawal', 'Cairo', sans-serif;
            overflow-x: hidden;
            background-color: #000;
            color: white;
        }
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            z-index: -1;
        }
        .splash-screen {
            position: fixed;
            width: 100vw;
            height: 100vh;
            background: #000;
            color: #fff;
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 20px;
        }
        .fade-out {
            animation: fadeOut 1s ease forwards;
        }
        @keyframes fadeOut {
            to { opacity: 0; visibility: hidden; }
        }
        /* Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø§Ù„ØªØ¯Ø±Ø¬ Ø§Ù„Ù…ØªØ­Ø±Ùƒ */
        @keyframes gradientMove {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        /* Ø²Ø± Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…ÙˆÙ‚Ø¹ - ØªØµÙ…ÙŠÙ… Ù…ØªØ­Ø±Ùƒ */
        .btn-primary {
            position: relative;
            display: inline-block;
            padding: 12px 36px;
            font-size: 1rem;
            font-weight: 700;
            color: #fff;
            text-transform: uppercase;
            letter-spacing: 1px;
            border: none;
            border-radius: 9999px;
            background: linear-gradient(270deg, #4f46e5, #8b5cf6, #ec4899, #f59e0b);
            background-size: 800% 800%;
            animation: gradientMove 8s ease infinite;
            box-shadow: 0 4px 15px rgba(79, 70, 229, 0.6);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
            overflow: hidden;
        }
        .btn-primary::before {
            content: '';
            position: absolute;
            top: -50%; left: -50%; right: -50%; bottom: -50%;
            background: radial-gradient(circle at center, rgba(255,255,255,0.3), transparent 70%);
            opacity: 0;
            transition: opacity 0.4s ease;
        }
        .btn-primary:hover::before {
            opacity: 1;
        }
        .btn-primary:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 25px rgba(79, 70, 229, 0.8);
        }
        .btn-primary:active {
            transform: scale(0.95);
            box-shadow: 0 3px 10px rgba(79, 70, 229, 0.9);
        }
        /* Ø²Ø± Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø´Ø§Øª - ØªØµÙ…ÙŠÙ… Ù…ØªØ­Ø±Ùƒ */
        .btn-send {
            position: relative;
            display: inline-block;
            background: linear-gradient(270deg, #10b981, #14b8a6, #06b6d4);
            background-size: 600% 600%;
            animation: gradientMove 6s ease infinite;
            color: #fff;
            padding: 10px 24px;
            font-size: 0.95rem;
            font-weight: 600;
            border: none;
            border-radius: 9999px;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.6);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            cursor: pointer;
            overflow: hidden;
        }
        .btn-send::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(255,255,255,0.2);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .btn-send:hover::before {
            opacity: 1;
        }
        .btn-send:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 18px rgba(16, 185, 129, 0.8);
        }
        .btn-send:active {
            transform: scale(0.95);
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.9);
        }
        /* Ø²Ø± Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø´Ø§Øª */
        .btn-close {
            font-size: 1.5rem;
            color: white;
            cursor: pointer;
            transition: color 0.2s ease, transform 0.2s ease;
            user-select: none;
        }
        .btn-close:hover {
            color: #f87171;
            transform: scale(1.3);
        }
        /* Ø£Ø²Ø±Ø§Ø± Ø£Ù†ÙˆØ§Ø¹ API - ØªØ£Ø«ÙŠØ± Ø²Ø¬Ø§Ø¬ÙŠ Ù…Ø¹ ØªØ¯Ø±Ø¬ Ù…ØªØ­Ø±Ùƒ */
        .api-type-btn {
            position: relative;
            display: block;
            padding: 1.5rem;
            font-size: 1.1rem;
            font-weight: 700;
            text-align: center;
            color: #fff;
            text-decoration: none;
            border-radius: 1rem;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.3);
            box-shadow: 0 4px 20px rgba(0,0,0,0.5);
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .api-type-btn::after {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(45deg, rgba(59,130,246,0.5), rgba(139,92,246,0.5), rgba(99,102,241,0.5));
            background-size: 200% 200%;
            animation: gradientMove 5s ease infinite;
            opacity: 0;
            transition: opacity 0.4s ease;
            z-index: 0;
        }
        .api-type-btn:hover::after {
            opacity: 1;
        }
        .api-type-btn span {
            position: relative;
            z-index: 1;
        }
        .api-type-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 30px rgba(59, 130, 246, 0.7);
        }
        /* ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø´Ø§Øª */
        #chat-container {
            background: rgba(255 255 255 / 0.1);
            backdrop-filter: blur(14px);
            border-radius: 1rem;
            box-shadow: 0 20px 30px rgba(0, 0, 0, 0.7);
            color: white;
        }
        /* ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ */
        #chat-messages > div {
            padding: 0.5rem 1rem;
            border-radius: 1rem;
            max-width: 80%;
            word-wrap: break-word;
        }
        /* Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… */
        .user-msg {
            background: rgba(37,99,235,0.8);
            margin-left: auto;
        }
        /* Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø±ÙˆØ¨ÙˆØª */
        .bot-msg {
            background: rgba(31,41,55,0.8);
            margin-right: auto;
        }
        /* Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£ */
        .error-msg {
            background: rgba(185,28,28,0.8);
            margin-right: auto;
        }
        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© */
        .logo {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            border: 5px solid rgba(255,255,255,0.1);
            box-shadow: 0 0 30px rgba(79, 70, 229, 0.7);
            margin-bottom: 20px;
        }
        .glow-title {
            text-shadow: 0 0 15px #fff, 0 0 30px #4f46e5, 0 0 45px #4f46e5;
            animation: glow 1.5s infinite alternate;
        }
        @keyframes glow {
            from { text-shadow: 0 0 10px #fff, 0 0 20px #4f46e5; }
            to { text-shadow: 0 0 20px #fff, 0 0 40px #8b5cf6; }
        }

        /* Ø´Ø±ÙŠØ· ØªÙ‚Ø¯Ù… Ø§Ù„ØªÙ…Ø±ÙŠØ± */
        #scroll-progress {
            position: fixed;
            top: 0;
            left: 0;
            height: 4px;
            width: 0;
            background: linear-gradient(90deg, #ec4899, #f59e0b);
            z-index: 50;
        }

        /* Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ÙØ§ØªØ­ */
        body.light {
            background-color: #f8fafc;
            color: #000;
        }
        body.light .overlay { background: rgba(255,255,255,0.6); }
    </style>
</head>
<body>
    <div id="scroll-progress"></div>
    <!-- Splash Screen -->
    <div id="splash" class="splash-screen">
        <img src="https://i.ibb.co/0jQ3ZzG/logo.png" alt="TARBOO Logo" class="logo animate-pulse">
        <h1 class="text-4xl font-bold mb-4 glow-title gradient-text">Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ÙÙŠ TARBOO API ğŸš€</h1>
        <div id="progress-bar" class="w-2/3 h-2 bg-gray-700 rounded overflow-hidden">
            <div id="progress" class="h-full w-0 bg-gradient-to-r from-purple-700 via-pink-500 to-yellow-400"></div>
        </div>
        <button onclick="enterSite()" class="btn-primary mt-4"><span>Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…ÙˆÙ‚Ø¹</span></button>
    </div>

    <!-- Background Video -->
    <video class="absolute top-0 left-0 w-full h-full object-cover z-[-2]" autoplay loop muted>
        <source src="https://files.catbox.moe/5etht6.mp4" type="video/webm" />
    </video>
    <div class="overlay"></div>
    <div id="particles-bg" class="particles-bg"></div>

    <!-- Header -->
    <header class="fixed top-0 w-full flex justify-between items-center px-6 py-3 bg-white bg-opacity-10 backdrop-blur z-20">
        <h1 id="main-title" class="text-2xl font-extrabold gradient-text">TARBOO</h1>
        <nav class="space-x-4 space-x-reverse hidden md:block">
            <a href="#services" class="hover:underline">Ø§Ù„Ø®Ø¯Ù…Ø§Øª</a>
            <a href="#features" class="hover:underline">Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª</a>
            <a href="#contact" class="hover:underline">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</a>
        </nav>
        <button id="theme-toggle" onclick="toggleTheme()" class="btn-send text-sm" aria-label="ØªØºÙŠÙŠØ± Ø§Ù„Ø«ÙŠÙ…">ÙˆØ¶Ø¹ Ù†Ù‡Ø§Ø±ÙŠ</button>
    </header>

    <!-- Container for API types -->
    <main class="flex flex-col items-center px-4 py-20">
        <div class="flex gap-2 mb-6 w-full max-w-md">
            <input id="search" type="text" oninput="filterTypes()" placeholder="Ø§Ø¨Ø­Ø«..." class="flex-1 p-2 rounded text-black" />
        </div>
        <p id="message" class="text-gray-300 mb-6">Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</p>
        <div id="type-container" class="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-3xl w-full"></div>
    </main>

    <!-- Chatbot -->
    <div class="fixed bottom-6 right-6">
        <div class="chatbot-icon cursor-pointer" onclick="toggleChat()">
            <img src="https://c.top4top.io/p_3352185ep0.jpg" alt="Bot" class="rounded-full w-14 h-14 shadow-lg" />
        </div>
        <div id="chat-container" class="hidden mt-2 w-80 p-4">
            <div class="flex justify-between items-center text-white mb-3">
                <span class="font-bold">ğŸ’¬ TARBOO Bot</span>
                <button onclick="toggleChat()" class="btn-close">Ã—</button>
            </div>
            <div id="chat-messages" class="h-64 overflow-y-auto space-y-2 mb-2"></div>
            <div class="flex gap-2">
                <input id="chat-input" type="text" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ..." onkeypress="handleKeyPress(event)" class="flex-1 p-2 rounded text-black" />
                <button onclick="sendMessage()" class="btn-send"><span>Ø¥Ø±Ø³Ø§Ù„</span></button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="file.js"></script>
    <script>
        function enterSite() {
            const splash = document.getElementById("splash");
            gsap.to(splash, {
                opacity: 0,
                duration: 1,
                ease: "power2.out",
                onComplete: () => {
                    splash.style.display = "none";
                    animatePageIn();
                },
            });
        }

        function simulateLoading() {
            const bar = document.getElementById("progress");
            let p = 0;
            const int = setInterval(() => {
                p += 1;
                if (bar) bar.style.width = p + "%";
                if (p >= 100) clearInterval(int);
            }, 40);
        }

        function toggleChat() {
            const chat = document.getElementById("chat-container");
            chat.classList.toggle("hidden");
            if (!chat.classList.contains("hidden")) {
                gsap.fromTo(chat, { y: 50, opacity: 0 }, { y: 0, opacity: 1, duration: 0.5, ease: "power2.out" });
            }
        }

        function handleKeyPress(e) {
            if (e.key === "Enter") sendMessage();
        }

        async function sendMessage() {
            const input = document.getElementById("chat-input");
            const messages = document.getElementById("chat-messages");
            const msg = input.value.trim();
            const prompt = "Ø£Ù†Øª Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ Ø§Ø³Ù…Ù‡ TARBOO. Ù‚Ø¯Ù… Ø¥Ø¬Ø§Ø¨Ø§Øª ÙˆØ§Ø¶Ø­Ø© ÙˆÙ…Ù‡Ø°Ø¨Ø© ÙˆØ¨Ø£Ø³Ù„ÙˆØ¨ Ø¥ÙŠØ¬Ø§Ø¨ÙŠ.";
            if (!msg) return;
            messages.innerHTML += `<div class='user-msg text-right'><span>${msg}</span></div>`;
            input.value = "";
            messages.scrollTop = messages.scrollHeight;
            try {
                const res = await fetch(`/api/ai/cai?prompt=${prompt}&text=${encodeURIComponent(msg)}`);
                const reply = await res.text();
                messages.innerHTML += `<div class='bot-msg text-left'><span>${reply}</span></div>`;
                messages.scrollTop = messages.scrollHeight;
            } catch {
                messages.innerHTML += `<div class='error-msg text-left'><span>âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…</span></div>`;
            }
        }

        async function loadTypes() {
            try {
                const res = await fetch("/api/list");
                const data = await res.json();
                const container = document.getElementById("type-container");
                const message = document.getElementById("message");
                message.style.display = "none";
                const types = [...new Set(data.map((api) => api.type || "Ø§ÙØªØ±Ø§Ø¶ÙŠ"))];
                types.forEach((type) => {
                    const el = document.createElement("a");
                    el.className = "api-type-btn";
                    el.href = `type.html?type=${encodeURIComponent(type)}`;
                    el.innerHTML = `<span>${type.toUpperCase()}</span>`;
                    container.appendChild(el);
                });
                gsap.from(".api-type-btn", { opacity: 0, y: 40, stagger: 0.15, duration: 0.6, ease: "power3.out" });
            } catch (err) {
                document.getElementById("message").innerText = "âŒ ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.";
            }
        }

        function animatePageIn() {
            gsap.from("#main-title", { y: -40, opacity: 0, duration: 1, ease: "power3.out" });
            gsap.from("main", { opacity: 0, y: 20, duration: 1, delay: 0.3, ease: "power3.out" });
            gsap.from(".chatbot-icon", { scale: 0, opacity: 0, duration: 0.7, delay: 0.7, ease: "back.out(1.7)" });
        }

        loadTypes();
        initProgressBar();
        simulateLoading();
    </script>
</body>
</html>